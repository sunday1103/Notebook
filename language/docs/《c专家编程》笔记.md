# C专家编程

[TOC]

## 第二章 C语言特性

### “多做之过”

- switch case语句的默认 fall through，极易引入问题；

- 字符串拼接功能在初始化字符串数组的时候容易引入问题：

  ```c
  char a*[] = {"first", "second" "third"};
  ```

  本意是定义3个元素的数组，但是实际上是2个元素。

- 默认定义为extern链接特性，针对全局程序可见

### “误做之过”

- 操作符的重载（在不同语境下代表不同的含义）
- 操作符的优先级和结合性
  
- 在所有不确定的地方都使用括号
  
- 库函数导致的安全问题：gets、scanf、etc

  > C99 有scanf_s

### “少做之过”

- 参数解析

- 注释

- 局部变量作为返回值

  > 可以使用静态变量解决这个问题，静态变量放在全局区。

- lint程序

  > c语言程序，都应该经过静态的和动态的检测程序的检测，并且保证新增代码也同样经过检测。
  >
  > 静态检测程序：pclint、cppcheck，cstyle check、etc
  >
  > 动态检测程序：vargrind、etc

## 第三章 C语言的声明

### 结构体、联合体、枚举

- 结构体可以直接赋值，相当于memcpy

  > - 可以用于简单的结构体赋值，而不适应memcpy
  > - ==可以进行函数传参==

- 联合体可以用于判断机子的大小端

  查看 [确定主机字节序](./主机字节序.md)

- 枚举可以用于调试器显示具体名字

### 声明的分析

见 https://www.nowcoder.com/questionTerminal/0f9c171f0d864d249e59cadcec3af36e?toCommentId=168712

cdecl实用程序

## 第四章 数组和指针

